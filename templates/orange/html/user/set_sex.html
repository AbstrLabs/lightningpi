<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head th:replace="common/header :: common_head(~{::title},~{},~{::link},~{})">
    <title th:text="'Modify Gender '+${application.website.name}"></title>
    <link rel="stylesheet" href="/css/user.css" />
</head>

<body class="">

    <div th:replace="common/top :: top('')">
    </div>
    <div class="main box_center cf">
        <div class="userBox cf">
            <div class="my_l">

                <ul class="log_list">
                    <li><a class="link_1 " href="/user/userinfo.html">Personal Center</a></li>
                    <li><a class="link_4" href="/user/favorites.html">My Bookshelf</a></li>
                    <li><a class="link_6 on" href="/user/comment.html">My Book Reviews</a></li>
                    <li><a class="link_7 " href="/user/feedback_list.html">My Feedback</a></li>
                    <li><a class="link_8 " href="/user/setup.html">Account Settings</a></li>
                </ul>

            </div>
            <div class="my_r">
                <div class="my_info cf">
                    <div class="my_info_txt">
                        <ul class="mytab_list">
                            <li><i class="tit">Choose Gender Channel for Reading Preference</i>
                                <label><input type="radio" name="sex" value="0" />&nbsp;Male</label>
                                <label><input class="ml20" type="radio" name="sex" value="1"
                                        checked />&nbsp;Female</label>
                            </li>
                            <li class="mt20"><i class="tit">&nbsp;</i><input type="button" onclick="updateSex()"
                                    name="btn" value="Edit" id="btn" class="s_btn btn_red" /></li>
                            <li><i class="tit">&nbsp;</i><span id="LabErr"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="common/footer :: footer">
    </div>
    <div th:replace="common/js :: js"></div>
    <script type="text/javascript">
        //查询用户信息
        $.ajax({
            type: "get",
            url: "/user/userInfo",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 200) {
                    if (data.data.userSex === '0') {
                        $("input[name=sex]").eq(0).attr("checked", true);
                    }



                } else if (data.code == 1001) {
                    //未登录
                    location.href = '/user/login.html?originUrl=' + decodeURIComponent(location.href);

                } else {
                    layer.alert(data.msg);
                }

            },
            error: function () {
                layer.alert('Network Exception');
            }
        })
        function updateSex() {
            $.ajax({
                type: "POST",
                url: "/user/updateUserInfo",
                data: { 'userSex': $("input[name=sex]:checked").val() },
                dataType: "json",
                success: function (data) {
                    if (data.code == 200) {
                        window.location.href = '/user/setup.html';

                    } else if (data.code == 1001) {
                        //未登录
                        location.href = '/user/login.html?originUrl=' + decodeURIComponent(location.href);

                    } else {
                        layer.alert(data.msg);
                    }

                },
                error: function () {
                    layer.alert('Network Exception');
                }
            })
        }
    </script>

</body>

</html>